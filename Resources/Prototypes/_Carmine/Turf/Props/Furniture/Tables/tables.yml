---
- type: entity
  id: TableBase
  parent: BaseStructure
  name: table
  description: A square piece of metal standing on four metal legs.
  abstract: true
  components:
  - type: Damageable
    damageContainer: Inorganic
    damageModifierSet: Metallic
  - type: PlaceableSurface
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.45,-0.45,0.45,0.45"
        density: 55
        mask:
        - TableMask
        layer:
        - TableLayer
        - BulletImpassable
  - type: SpriteFade
  - type: Sprite
  - type: Climbable
  - type: Bonkable
    bonkDamage:
      types:
        Blunt: 4
  - type: Clickable
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepHull
  - type: RequireProjectileTarget
  - type: ThrownItemImmune
  
- type: entity
  id: TableBaseSmooth
  parent: TableBase
  abstract: true
  components:
  - type: Icon
    state: full
  - type: IconSmooth
    key: state
    base: state_

# TABLES

- type: entity
  id: TableReinforced
  parent: TableBaseSmooth
  name: reinforced table
  description: A square piece of metal standing on four metal legs. Extra robust.
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/reinforced.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/reinforced.rsi
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 30
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
          params:
            volume: -6
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 2
            max: 2
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

- type: entity
  id: TableGlass
  parent: TableBaseSmooth
  name: glass table
  description: A square piece of glass, standing on four metal legs.
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/glass.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/glass.rsi
  - type: GlassTable
    climberDamage:
      types:
        Slash: 15
    tableDamage:
      types:
        Blunt: 25
    tableMassLimit: 60
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 5
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: GlassBreak
      - !type:SpawnEntitiesBehavior
        spawn:
          ShardGlass:
            min: 1
            max: 1
      - !type:ChangeConstructionNodeBehavior
        node: TableFrame
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepTile

- type: entity
  id: OperatingTable
  parent: Bed
  name: operating table
  description: Used for advanced medical procedures.
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/optable.rsi
    state: operating_table
    noRot: true
  - type: OperatingTable

- type: entity
  parent: TableBase
  id: TableMetalRound
  name: round metal table
  suffix: clean
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_metal_round-2

- type: entity
  parent: TableBase
  id: TableMetalRoundDirty
  name: round table
  suffix: dirty
  description: A round metal table. Prison like.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_metal_round # N14TODO: There's a second sprite of this, need it to spawn a random one.

- type: entity
  parent: TableBase
  id: TableDeskSchool
  name: end table
  description: A wooden end table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_end
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0.15,-0.25,0.25,0.25"
        density: 55
        mask:
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableBase
  id: TableWoodEnd
  name: end table
  description: A wooden end table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_end
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0.15,-0.25,0.25,0.25"
        density: 55
        mask:
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableWoodSquare
  id: TableWoodRound
  name: wooden table
  description: A wooden round table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_round

- type: entity
  parent: TableBase
  id: TableWoodSquare
  name: wooden table
  description: A wooden square table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_square
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0.35,-0.15,0.35,0.45"
        density: 55
        mask:
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableBase
  id: TableWoodLow
  name: wooden table
  description: A low wooden square table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_low

- type: entity
  parent: TableBase
  id: TableWoodStand
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: table_wood_stand

- type: entity
  parent: TableBase
  id: TableWoodCabledrum
  name: cable drum
  description: A convenient table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: cable_reel

- type: entity
  parent: TableBase
  id: TableCasinoDice
  name: dice table
  description: A table for playing dice games.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: dice_clean

- type: entity
  parent: TableBase
  id: TableCasinoDiceDirty
  suffix: dirty
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/tables.rsi
    state: dice_dirty

#64x64 tables
- type: entity
  parent: TableBase
  id: TableDeskMetal
  name: metal desk
  description: A metal desk for working at. Sturdy.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/desks.rsi
    state: desk_metal
    offset: 0.5, 0
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0.35,0,1.35,0.45"
        density: 55
        mask: # tables should collide with other tables
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableDeskMetal
  id: TableDeskMetalDirty
  suffix: dirty
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: desk_metal

- type: entity
  parent: TableBase
  id: TableDeskMetalSmall
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: desk_metal_small

- type: entity
  parent: TableBase
  id: TableDeskWood
  name: wooden desk
  description: A wooden desk for working at.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/desks.rsi
    state: desk_wood
    offset: 0.5, 0
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0,0,1,0.45"
        density: 55
        mask: # tables should collide with other tables
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableBase
  id: TableBase2
  suffix: alt
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: desk_wood

- type: entity
  parent: TableBase
  id: TableBaseSmall
  suffix: small
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: desk_wood_small

- type: entity
  parent: TableBase
  id: TableCasinoCards
  name: cards table
  description: A fancy table for playing cards at.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: table_cards

- type: entity
  parent: TableBase
  id: TableCasinoPool
  name: pool table
  description: A fancy table for playing pool at.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: table_pool

- type: entity
  parent: TableBase
  id: TableWoodenOvalWide
  name: wooden table
  description: An oval table made from wood.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: table_wood_wide_oval

- type: entity
  parent: TableBase
  id: TableWoodenSquareWide
  name: wooden table
  description: A wide square table made from wood.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: table_wood_wide_square

- type: entity
  parent: TableBase
  id: TableMetalWide
  name: metal table
  description: A wide metal table.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/64x64_furniture.rsi
    state: table_metal_wide

- type: entity
  parent: TableBase
  id: TableCounter
  name: wooden counter
  suffix: full
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: wood_counter
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
            bounds: "-0.45,-0.45,0.45,0.45"
        density: 55
        mask: # tables should collide with other tables
        - TableMask
        layer:
        - TableLayer

- type: entity
  parent: TableBase
  id: TableBaseBend
  suffix: corner
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: wood_counter_bend

- type: entity
  parent: TableBase
  id: TableBaseIntersect
  suffix: intersect
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: wood_counter_intersect

- type: entity
  parent: TableBase
  id: TableBaseCross
  suffix: cross
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: wood_counter_cross

- type: entity
  parent: TableBase
  id: TableBaseCraft
  description: This counter looks like scrap.
  suffix: craft full
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: craft_counter

- type: entity
  parent: TableBase
  id: TableBaseCraftBend
  suffix: craft corner
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: craft_counter_bend

- type: entity
  parent: TableBase
  id: TableBaseCraftIntersect
  suffix: craft intersect
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: craft_counter_intersect

- type: entity
  parent: TableBase
  id: TableBaseCraftCross
  suffix: craft cross
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: craft_counter_cross

- type: entity
  parent: TableBase
  id: TableBaseMetal
  name: metal counter
  description: A cold, hard metal counter.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: metal_counter

- type: entity
  parent: TableBaseMetal
  id: TableBaseMetalBend
  suffix: corner
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: metal_counter_bend

- type: entity
  parent: TableBaseMetal
  id: TableBaseMetalIntersect
  suffix: intersect
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: metal_counter_intersect

- type: entity
  parent: TableBaseMetal
  id: TableBaseMetalCross
  suffix: cross
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/counters.rsi
    state: metal_counter_cross

- type: entity
  id: TableMetalGrate
  parent: TableBaseSmooth
  name: metal table
  description: A cold handmade metal table made from grating.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/metalgrate.rsi
  - type: Icon
    sprite: _Nuclear14/Structures/Furniture/Tables/metalgrate.rsi
    
- type: entity
  parent: TableBaseSmooth
  id: TableBaseBar
  name: bar counter
  description: An alcohol stained bartop.
  components:
  - type: Sprite
    sprite: _Nuclear14/Structures/Furniture/Tables/barcounter.rsi
  - type: Icon
    sprite: _Nuclear14/Structures/Furniture/Tables/barcounter.rsi

# GAMBLING TABLES

- type: entity
  id: TableCarpet
  parent: TableBaseSmooth
  name: gambling table
  description: Play em' cowboy.
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/carpet.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/carpet.rsi
  - type: Damageable
    damageModifierSet: Wood
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 15
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: WoodDestroy
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialWoodPlank:
            min: 1
            max: 1
          MaterialCloth1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepCarpet

# FANCY TABLES

- type: entity
  id: TableFancyBase
  abstract: true
  parent: TableBaseSmooth
  name: fancy table
  description: Expensive and rich.
  components:
  - type: Damageable
    damageModifierSet: Wood
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 25
      behaviors:
      - !type:PlaySoundBehavior
        sound:
          collection: WoodDestroy
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialWoodPlank:
            min: 1
            max: 1
          MaterialCloth1:
            min: 1
            max: 1
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Tag
    tags:
    - Wooden
  - type: FootstepModifier
    footstepSoundCollection:
      collection: FootstepCarpet

- type: entity
  id: TableFancyBlue
  parent: TableFancyBase
  suffix: Blue
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/blue.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/blue.rsi

- type: entity
  id: TableFancyCyan
  parent: TableFancyBase
  suffix: Cyan
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/cyan.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/cyan.rsi

- type: entity
  id: TableFancyBlack
  parent: TableFancyBase
  suffix: Black
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/black.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/black.rsi

- type: entity
  id: TableFancyRed
  parent: TableFancyBase
  suffix: Red
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/red.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/red.rsi

- type: entity
  id: TableFancyPurple
  parent: TableFancyBase
  suffix: Purple
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/purple.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/purple.rsi

- type: entity
  id: TableFancyPink
  parent: TableFancyBase
  suffix: Pink
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/pink.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/pink.rsi

- type: entity
  id: TableFancyGreen
  parent: TableFancyBase
  suffix: Green
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/green.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/green.rsi

- type: entity
  id: TableFancyOrange
  parent: TableFancyBase
  suffix: Orange
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/orange.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/orange.rsi

- type: entity
  id: TableFancyWhite
  parent: TableFancyBase
  suffix: White
  components:
  - type: Sprite
    sprite: Structures/Furniture/Tables/Fancy/white.rsi
  - type: Icon
    sprite: Structures/Furniture/Tables/Fancy/white.rsi
